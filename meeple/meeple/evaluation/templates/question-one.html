{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block body %}

<div class="position-relative custom-container">
    <div class="position-absolute top-50 start-0 translate-middle-y negative-padding-bottom">
        <img src="{% static 'images/dicesReverse.png' %}" alt="Image" draggable="false" class="w-75">
    </div>

    <form action="{% url 'second' %}" method="POST"
        class="container h-100 d-flex align-items-center justify-content-end position-absolute end-0 start-0 p-5 pr-5 w-100">
        {% csrf_token %}
        <div
            class="custom-div d-flex flex-column justify-content-center align-items-center shadow-lg p-5 bg-body rounded rounded-5 border border-dark border-2 w-100 med-maxwidth">
            <div class="text-center d-flex flex-column">
                <h1 class="pb-4 fw-bold text-center">{% trans "FirstQuestion" %}</h1>
                <div class="d-flex flex-wrap justify-content-center">
                    <button type="button" class="btn btn-primary rounded-pill btn-inverse-mostaza px-4 fw-bold m-2"
                        value="game-style" name="button" onclick="pressedButton(this)">{% trans "Quick" %}</button>
                    <button type="button" class="btn btn-primary rounded-pill btn-inverse-mostaza px-4 fw-bold m-2"
                        value="game-style" name="button" onclick="pressedButton(this)">{% trans "Short" %}</button>
                    <button type="button" class="btn btn-primary rounded-pill btn-inverse-mostaza px-4 fw-bold m-2"
                        value="game-style" name="button" onclick="pressedButton(this)">{% trans "Moderate" %}</button>
                    <button type="button" class="btn btn-primary rounded-pill btn-inverse-mostaza px-4 fw-bold m-2"
                        value="game-style" name="button" onclick="pressedButton(this)">{% trans "Long" %}</button>
                    <button type="button" class="btn btn-primary rounded-pill btn-inverse-mostaza px-4 fw-bold m-2"
                        value="game-style" name="button" onclick="pressedButton(this)">{% trans "VeryLong" %}</button>
                </div>
                <input type="hidden" name="selections" id="selections">
                <br>
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary rounded-pill btn-terracota px-4 fw-bold mt-3">{% trans "SubmitQuestion" %}</button>
                </div>
            </div>
        </div>
    </form>
</div>


<div id="thanks" class="modal thanks position-absolute top-50 start-50 translate-middle">
    <div class="d-flex justify-content-center align-items-center" style="height: 100vh;">
        <div class="position-relative info-content p-5 border-1 m-auto">
            <span class="close" onclick="closeInformation()">&times;</span>
            <h2>{% trans "WelcomeQuestion" %}</h2>
            <br>
            <h4>{% trans "AlertThanksPtOne" %}</h4>
            <h4>{% trans "AlertThanksPtTwo" %}</h4>
        </div>
    </div>
</div>
</div>

<script>
    // Función para abrir la ventana de agradecimiento
    function openInformation() {
        document.getElementById("thanks").style.display = "block";
    }

    // Función para cerrar la ventana de agradecimiento
    function closeInformation() {
        document.getElementById("thanks").style.display = "none";
    }

    // Cerrar la ventana flotante si se hace clic fuera de él
    window.onclick = function (event) {
        var thanks = document.getElementById("thanks");
        if (event.target == thanks) {
            closeInformation();
        }
    }

    // Action that makes when a choice button is pressed
    function pressedButton(boton) {
        // Change to checked-button class
        boton.classList.toggle('checked-button');

        actualizarselections();
    }

    function actualizarselections() {
        const botones = document.querySelectorAll('form button');
        const selections = [];

        botones.forEach(boton => {
            if (boton.classList.contains('checked-button')) {
                selections.push(boton.textContent);
            }
        });

        document.getElementById('selections').value = JSON.stringify(selections);
    }
</script>

{% endblock body %}